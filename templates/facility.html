{% extends "base.html" %}
{% block title %}Facility â€” TrailCondish{% endblock %}
{% block content %}
<div class="facility-header">
    <div class="container">
        <span class="type-label" id="fac-type"></span>
        <h1 id="fac-name">Loading...</h1>
    </div>
</div>
<section class="section" style="padding-top:1.5rem">
    <div class="container">
        <div class="detail-grid">
            <div>
                <div class="info-block">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
                        About
                    </h3>
                    <div id="fac-description"></div>
                    <div id="fac-directions" style="margin-top:1rem"></div>
                </div>
                <div class="info-block" id="fac-activities-block" style="display:none">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5S13.67 7 14.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/><path d="M8.5 14l1 3.4a.5.5 0 00.5.35h.28a.5.5 0 00.47-.33L12 14"/><path d="M13 16l1.5 4.4a.5.5 0 00.47.35h.28a.5.5 0 00.48-.36L18 14"/><path d="M18 14l-2-6h-4l-1 3"/></svg>
                        Activities
                    </h3>
                    <div class="activity-tags" id="fac-activities"></div>
                </div>
                <div class="info-block" id="fac-photos-block" style="display:none">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                        Photos
                    </h3>
                    <div class="photo-grid" id="fac-photos"></div>
                </div>
                <div class="info-block" id="fac-contact-block" style="display:none">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6A19.79 19.79 0 012.12 4.18 2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
                        Contact
                    </h3>
                    <div id="fac-contact"></div>
                </div>
            </div>
            <div>
                <div style="margin-bottom:1rem">
                    <label class="toggle-label" onclick="toggleTrails()">
                        <div class="toggle-switch" id="trail-toggle"></div>
                        Show Hiking Trails
                    </label>
                </div>
                <div id="facility-map"></div>
                <div class="weather-widget" style="margin-top:1.5rem">
                    <h3 style="color:var(--brown);margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 14.76V3.5a2.5 2.5 0 00-5 0v11.26a4.5 4.5 0 105 0z"/></svg>
                        Weather &amp; Conditions
                    </h3>
                    <div id="weather-content"><div class="loading"><div class="spinner"></div></div></div>
                </div>
            </div>
        </div>

        <div class="info-block" style="margin-top:2rem">
            <h3>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
                Community Condition Reports
            </h3>
            <div id="reports-list"><div class="loading"><div class="spinner"></div></div></div>
            <h4 style="margin-top:1.5rem;color:var(--brown)">Submit a Report</h4>
            <form id="report-form" style="margin-top:.75rem">
                <div class="form-group">
                    <label>Overall Condition</label>
                    <div class="radio-group">
                        <label><input type="radio" name="status" value="Great"><span>Great</span></label>
                        <label><input type="radio" name="status" value="Good" checked><span>Good</span></label>
                        <label><input type="radio" name="status" value="Fair"><span>Fair</span></label>
                        <label><input type="radio" name="status" value="Poor"><span>Poor</span></label>
                        <label><input type="radio" name="status" value="Closed"><span>Closed</span></label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Trail Surface</label>
                    <div class="radio-group">
                        <label><input type="radio" name="trail_condition" value="Dry"><span>Dry</span></label>
                        <label><input type="radio" name="trail_condition" value="Muddy"><span>Muddy</span></label>
                        <label><input type="radio" name="trail_condition" value="Snowy"><span>Snowy</span></label>
                        <label><input type="radio" name="trail_condition" value="Icy"><span>Icy</span></label>
                        <label><input type="radio" name="trail_condition" value="Flooded"><span>Flooded</span></label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Road Access</label>
                    <div class="radio-group">
                        <label><input type="radio" name="road_access" value="Clear & Paved"><span>Clear &amp; Paved</span></label>
                        <label><input type="radio" name="road_access" value="Passable but Rough"><span>Passable but Rough</span></label>
                        <label><input type="radio" name="road_access" value="High Clearance"><span>High Clearance</span></label>
                        <label><input type="radio" name="road_access" value="Closed"><span>Closed</span></label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Date Visited</label>
                    <input type="date" name="date_visited">
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea name="general_notes" placeholder="Share what you saw..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Submit Report</button>
            </form>
            <div id="report-success" class="success-msg" style="display:none;margin-top:1rem">Report submitted! Thank you for helping the community.</div>
        </div>
    </div>
</section>
{% endblock %}
{% block scripts %}
<script>const FACILITY_ID = "{{ facility_id }}";</script>
<script src="/static/js/facility.js"></script>
{% endblock %}
